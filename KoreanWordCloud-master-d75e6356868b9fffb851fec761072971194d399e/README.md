# Word Cloud

## About
입력 값(txt파일, 노래제목검색을 통한 가사크롤링)에서 추출한 단어들로 Word Cloud를 생성하는 프로젝트이다.


## Overview
![Cloud](http://git.ajou.ac.kr/open-source-2018-spring/KoreanWordCloud/raw/a23dcc8e25afad4e58e8cb6a79ab53696a006418/example%20images/cloud.png)
![Japan](http://git.ajou.ac.kr/open-source-2018-spring/KoreanWordCloud/raw/a23dcc8e25afad4e58e8cb6a79ab53696a006418/example%20images/japan.png)
![España](http://git.ajou.ac.kr/open-source-2018-spring/KoreanWordCloud/raw/a23dcc8e25afad4e58e8cb6a79ab53696a006418/example%20images/Espa%C3%B1a.png)



프로젝트는 크게 두 방향으로 진행되었습니다.
먼저, 개발자들을 위해 Word Cloud Library를 수정하여 타 국가 언어의 텍스트 파일의 언어를 인식하여 그에 맞는 폰트를 적용해주었습니다.
이를 통해 개발자들은 사용법의 큰 변화 없이 타 국가 언어 텍스트 파일로 워드 클라우드를 만들 수 있게 되었습니다.
또한 일반 사용자들이 쉽게 이용할 수 있도록 웹 페이지를 만들어서, 사진과 텍스트 파일을 올리면 이미지를 생성할 수 있게 하였습니다.
또한 크롤링을 통해 노래 제목에 맞는 가사를 추출해 와서 텍스트 파일이 없어도 워드 클라우드를 만들 수 있습니다.
<br><br>
## Project License
### GNUv3
<br><br>
## Open Source and Licences
### [Word cloud](https://github.com/amueller/word_cloud)
#### License: MIT License
![WordCloud](https://raw.githubusercontent.com/amueller/word_cloud/master/examples/alice.png)
```
Copyright (c) 2012 Andreas Christian Mueller

Permission is hereby granted, free of charge, to any person obtaining a copy of
this software and associated documentation files (the "Software"), to deal in
the Software without restriction, including without limitation the rights to
use, copy, modify, merge, publish, distribute, sublicense, and/or sell copies of
the Software, and to permit persons to whom the Software is furnished to do so,
subject to the following conditions:

The above copyright notice and this permission notice shall be included in all
copies or substantial portions of the Software.

THE SOFTWARE IS PROVIDED "AS IS", WITHOUT WARRANTY OF ANY KIND, EXPRESS OR
IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF MERCHANTABILITY, FITNESS
FOR A PARTICULAR PURPOSE AND NONINFRINGEMENT. IN NO EVENT SHALL THE AUTHORS OR
COPYRIGHT HOLDERS BE LIABLE FOR ANY CLAIM, DAMAGES OR OTHER LIABILITY, WHETHER
IN AN ACTION OF CONTRACT, TORT OR OTHERWISE, ARISING FROM, OUT OF OR IN
CONNECTION WITH THE SOFTWARE OR THE USE OR OTHER DEALINGS IN THE SOFTWARE.
```
### [KonlPy](http://konlpy-ko.readthedocs.io/ko/v0.4.3/)
#### License: GNU v3
![KonlPy](http://konlpy-ko.readthedocs.io/ko/v0.4.3/_static/konlpy.png)
```
Copyright © 2007 Free Software Foundation, Inc. <https://fsf.org/>
 <one line to give the program's name and a brief idea of what it does.>
    Copyright (C) <year>  <name of author>

    This program is free software: you can redistribute it and/or modify
    it under the terms of the GNU General Public License as published by
    the Free Software Foundation, either version 3 of the License, or
    (at your option) any later version.

    This program is distributed in the hope that it will be useful,
    but WITHOUT ANY WARRANTY; without even the implied warranty of
    MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the
    GNU General Public License for more details.

    You should have received a copy of the GNU General Public License
    along with this program.  If not, see <https://www.gnu.org/licenses/>.
```
박은정, 조성준, “KoNLPy: 쉽고 간결한 한국어 정보처리 파이썬 패키지”, 제 26회 한글 및 한국어 정보처리 학술대회 논문집, 2014. <br>
### [BeautifulSoup](https://github.com/akalongman/python-beautifulsoup/blob/master/LICENSE)
#### License: THE MIT License (MIT)
![BeautifulSoup](http://pds27.egloos.com/pds/201408/06/32/d0096432_53e21c7b934cc.jpg)
```
	Copyright (c) 2016 Avtandil Kikabidze
	
	Permission is hereby granted, free of charge, to any person obtaining a copy
	of this software and associated documentation files (the "Software"), to deal
	in the Software without restriction, including without limitation the rights
	to use, copy, modify, merge, publish, distribute, sublicense, and/or sell
	copies of the Software, and to permit persons to whom the Software is
	furnished to do so, subject to the following conditions:
	
	The above copyright notice and this permission notice shall be included in all
	copies or substantial portions of the Software.
	
	THE SOFTWARE IS PROVIDED "AS IS", WITHOUT WARRANTY OF ANY KIND, EXPRESS OR
	IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF MERCHANTABILITY,
	FITNESS FOR A PARTICULAR PURPOSE AND NONINFRINGEMENT. IN NO EVENT SHALL THE
	AUTHORS OR COPYRIGHT HOLDERS BE LIABLE FOR ANY CLAIM, DAMAGES OR OTHER
	LIABILITY, WHETHER IN AN ACTION OF CONTRACT, TORT OR OTHERWISE, ARISING FROM,
	OUT OF OR IN CONNECTION WITH THE SOFTWARE OR THE USE OR OTHER DEALINGS IN THE
	SOFTWARE.
```
### [Python Flask](http://flask.pocoo.org/)
#### License: BSD License <br>
![Flask](http://flask.pocoo.org/static/logo/flask.png)
```
Copyright © 2010 by the Pallets team.

Some rights reserved.

Redistribution and use in source and binary forms of the software as well as
documentation, with or without modification, are permitted provided that the
following conditions are met:

Redistributions of source code must retain the above copyright notice, this list
of conditions and the following disclaimer.
Redistributions in binary form must reproduce the above copyright notice, this
list of conditions and the following disclaimer in the documentation and/or
other materials provided with the distribution.
Neither the name of the copyright holder nor the names of its contributors may
be used to endorse or promote products derived from this software without specific
prior written permission.
THIS SOFTWARE AND DOCUMENTATION IS PROVIDED BY THE COPYRIGHT HOLDERS AND CONTRIBUTORS
“AS IS” AND ANY EXPRESS OR IMPLIED WARRANTIES, INCLUDING, BUT NOT LIMITED TO, THE
IMPLIED WARRANTIES OF MERCHANTABILITY AND FITNESS FOR A PARTICULAR PURPOSE ARE DISCLAIMED.
IN NO EVENT SHALL THE COPYRIGHT HOLDER OR CONTRIBUTORS BE LIABLE FOR ANY DIRECT, INDIRECT,
INCIDENTAL, SPECIAL, EXEMPLARY, OR CONSEQUENTIAL DAMAGES (INCLUDING, BUT NOT LIMITED TO,
PROCUREMENT OF SUBSTITUTE GOODS OR SERVICES; LOSS OF USE, DATA, OR PROFITS; OR BUSINESS
INTERRUPTION)HOWEVER CAUSED AND ON ANY THEORY OF LIABILITY, WHETHER IN CONTRACT, STRICT
LIABILITY, OR TORT (INCLUDING NEGLIGENCE OR OTHERWISE) ARISING IN ANY WAY OUT OF THE USE
OF THIS SOFTWARE AND DOCUMENTATION, EVEN IF ADVISED OF THE POSSIBILITY OF SUCH DAMAGE.
```
### [Soynlp](https://github.com/lovit/soynlp)
#### License: GPL v3 <br>
### [Python Korean NLP](http://git.ajou.ac.kr/open-source-2018-spring/python_Korean_NLP)
#### License: GPL v2.0 <br>
### [langdetect](https://pypi.org/project/langdetect/)
#### License: Apache Software License <br>
<br> <br>
## Development Environment
<br><br>
### Python
### HTML5
<br><br>
# 보고서 


## 1. SW개발자에게 도움이되는 Source Code or Source Code Sample,
앞서 말한대로, 본 프로젝트는 비영어권 개발자들을 위해 라이브러리를 수정하였습니다.
1. 기존에는 사용하지 않았던 langdetect나, korea_nlp와 같은 라이브러리를 추가하였습니다.
![image1](http://git.ajou.ac.kr/open-source-2018-spring/KoreanWordCloud/raw/90162a2e4f37d634f10590c375291e3862247e45/raw/imports.PNG) <br>

2. 사용자가 직접 사용하는 generate method 내에서 generate_from_text를 수행하기 전에 어떤 언어인지를 detecting해주는 method를 추가하였고, 이를 generate method에서 사용하였습니다.
![image2](http://git.ajou.ac.kr/open-source-2018-spring/KoreanWordCloud/raw/90162a2e4f37d634f10590c375291e3862247e45/raw/method_generate.PNG) <br>

3. detect_language method에서는 어떤 언어인지를 구분하였고, 해당 언어에 맞는 폰트를 지정하였습니다.(폰트는 윈도우즈에서 기본적으로 지원하는 폰트입니다.)
![image3](http://git.ajou.ac.kr/open-source-2018-spring/KoreanWordCloud/raw/90162a2e4f37d634f10590c375291e3862247e45/raw/method_detect_language.PNG) <br>

4. generate_from_text에서는 한국어일때와 아닐때를 구분했습니다. 한국어일때는 제가 직접 만든 ko_process를 통해 단어를 추출했습니다.
![image4](http://git.ajou.ac.kr/open-source-2018-spring/KoreanWordCloud/raw/90162a2e4f37d634f10590c375291e3862247e45/raw/method_generate_from_text.PNG) <br>

5. ko_process에서는 한국어일때 단어 추출 과정을 수행하였습니다. 사진속의 noun_extract method는 korea_nlp 프로젝트에서 만든 라이브러리의 method를 사용했습니다.
![image5](http://git.ajou.ac.kr/open-source-2018-spring/KoreanWordCloud/raw/90162a2e4f37d634f10590c375291e3862247e45/raw/method_ko_process.PNG) <br>

## 2. 기존 오픈소스 프로젝트에 비하여 개선된 사항

기존 오픈소스인 Word Cloud는 영어로만된 txt파일만을 적용시킬 수 있었는데, 영어 이외에 6가지언어로 된 txt파일도 사용할 수 있습니다.
또한 txt파일의 유무와 관계없이 노래제목 검색시 자동 가사 크롤링을 통해 자동 txt를 생성하여 포스터를 만들 수 도 있습니다.
크롤링을 통한 자동 txt파일 생성은 다른 오픈소스에도 기여 할 수 있을 것 같습니다. 

## 3. 기존 오픈소스 프로젝트의 이슈 및 해결 (혹은 제안 까지라도)

앞에서도 설명했듯이, 영어 외에는 출력이 깨지던 것을 수정하여, 한국어, 중국어, 일본어, 스페인어 등에서도 깨짐 현상이 없도록 수정하였습니다. 특히 한국어의 경우, korea_nlp 프로젝트의 라이브러리를 사용하여, 명사 단위로 text를 끊어서 출력이 자연스럽도록 하였습니다. (타 언어는 형태소 단위를 자세하게 알지 못하므로 따로 수행하지는 않았습니다.) <br>

## 4. 관련되거나 사용한 오픈소스에 대한 Survey (비교자료 등)

https://github.com/amueller/word_cloud [github] 파이썬<br>
파이썬으로 word cloud를 구성했고, 텍스트와 이미지를 선택하면 영어로된 언어에 한해서 word cloud를 출력가능하다.<br><br>

https://github.com/jasondavies/d3-cloud [github] 자바 <br>
파이썬이 아닌 자바언어로 word cloud를 구현했다.<br><br>

https://github.com/kimyoungjin06/wordcloud [github] 한글 <br>
글자를 이미지 파일로 저장한 후, 시인 이름을 입력받으면 텍스트(시인의 시)를 불러와 텍스트 값으로 넣게 된다.<br>
글자 이미지에 word cloud를 형성된다.<br><br>


## 5. 유사 오픈소스 프로젝트

영화 리뷰 분석 팀<br><br>

공통점 :<br>
1) 형태소를 분석해 단어를 뽑아낸다.<br>
2) word cloud로 구현하여 표시했다.<br><br>

차이점 : <br>
영화 리뷰 분석팀 : 긍정/부정 단어를 판별해 영화에 대한 유사도를 판별한다.<br>
Korean word cloud : 다양한 나라의 언어를 지원한다. 이미지 파일을 입력받을 수 있어서 다양한 이미지 위에 구현가능하다.
				웹으로 구현하였고, 텍스트와 노래 제목중 선택해서 Word cloud를 만들 수 있다.

<br>

## 5.1. Installation notes
Windows 기반의 Gitbash에서 Word Cloud를 수행하기 위한 과정을 설명합니다.

#### 1. Anaconda & Python3
설치에 앞서, 이 프로젝트는 Python3를 기반으로 진행된 프로젝트이기 때문에 파이썬 및 파이썬 라이브러리를 지원하는 Anaconda가 설치되어있어야 합니다. <br>
Python 3.6으로 설치하시면 됩니다.
> [Anaconda](https://www.anaconda.com/download/)


Python 3.6.X로 설치하시면 됩니다.
> [Python](https://www.python.org/downloads/)

#### 2. wget
Gitbash에서 파일을 받아오기 위해 wget을 설치해 줍니다. (기존의 Gitbash에서는 wget을 바로 지원하지 않습니다.)
1. Gitbash에서 wget을 쳐서 에러가 출력되는지 확인합니다. 에러가 출력되면 wget을 설치해야 합니다.
2. wget 최신버젼의 .zip 파일로 받아줍니다. [wget](https://eternallybored.org/misc/wget/)
3. 7zip을 이용해서 압축을 풀어줍니다.
4. Gitbash를 관리자 권한으로 실행한 뒤, wget.exe 파일을 Gitbash의 /mingw64/bin으로 옮겨줍니다. ( mv wget.exe /mingw64/bin )
5. Gitbash에서 wget --help를 쳐서 에러가 나오지 않는지 확인합니다.

#### 3. Word Cloud Library
Word Cloud를 실제로 설치합니다.
<Anaconda Prompt>
> conda install -c conda-forge wordcloud


wget으로 파일을 받아오고, 압축을 해제합니다.
> wget http://git.ajou.ac.kr/open-source-2018-spring/KoreanWordCloud.git


> unzip master.zip


> rm master.zip


> cd word_cloud-master


package를 설치합니다.
> python setup.py install

#### 4. Beautiful Soup Library
Web Crawling을 하기 위해 파이썬 모듈인 Beautiful soup 설치합니다.

뷰티플 soup 설치 방법

Python이 설치된 경로 밑에 Scripts폴더 내에서 CMD창에서

> easy_install beautifulsoup4 ( or pip beautifulsoup4)

> pip install requests
> pip install bs4

본 WebCrawling의 경우 벅스뮤직(https://music.bugs.co.kr/) 홈페이지 활용 <br>
웹페이지에서 노래 제목을 입력받을 때 19세 이상 노래의 경우  <br>
로그인의 문제가 발생하여 오류 메시지가 출력되도록 구현하였습니다. <br>

#### 5. langdetect Library

> pip install langdetect

#### 6. KoNLPy Library

> ![KoNLPy](http://konlpy-ko.readthedocs.io/ko/v0.4.3/install/#id2)

#### 7. Soynlp Library

> pip install soynlp

#### 8. Flask Library

> pip install flask

#### 9. Korean Word Cloud

Korean Word Cloud를 설치하기 위한 절차입니다.
1. 저희 Git page의 Repository -> Files에서 오른쪽 상단의 내려받기 버튼을 눌러서 zip 파일로 다운로드 받습니다.
2. 압축을 풀고, KoreanWordCloud 폴더의 wordcloud 폴더로 들어갑니다.
3. wordcloud 폴더 안에서 wordcloud.py와 korea_nlp.py 파일을 C:\Users\(User명)\Anaconda3\Lib\site-packages\wordcloud 으로 덮어쓰기 합니다.
4. 수정된 라이브러리를 사용할 수 있습니다.
5. from wordcloud import WordCloud, STOPWORDS, ImageColorGenerator

## 5.2. 실행 방법 
<br>
### URL : localhost:5000/ 서버에 접속

### ★1. 사진과 txt를 넣었을 때
![Picture_txt](http://git.ajou.ac.kr/open-source-2018-spring/KoreanWordCloud/raw/c673616f359869900667d4726933ea91045cd8fe/raw/picture_txt.png)
<br>

### ★결과
![Result_txt](http://git.ajou.ac.kr/open-source-2018-spring/KoreanWordCloud/raw/c673616f359869900667d4726933ea91045cd8fe/raw/result_txt.png)
<br>

### ★2. 사진과 노래 제목 
![Picture_lyrics](http://git.ajou.ac.kr/open-source-2018-spring/KoreanWordCloud/raw/c673616f359869900667d4726933ea91045cd8fe/raw/picture_lyrics.png)
<br>

### ★결과
![Result_lyrics](http://git.ajou.ac.kr/open-source-2018-spring/KoreanWordCloud/raw/c673616f359869900667d4726933ea91045cd8fe/raw/result_lyrics.png)
<br>

### ★ 텍스트 와 노래 제목을 동시에 입력을 하면 노래 제목을 우선시 출력됩니다.

## 6. 기타 오픈소스를 사용하고자 하는 SW개발자에 도움이 되는 것 모두

## Members
박혜진:  Word Cloud 아이디어를 제안하여 채택되었습니다. issue제기로 인한 언어 두가지인 그리스어, 태국어를 추가 지원하였습니다. 마지막으로 모든 기능을 Web으로 구현하였습니다. <br>
박종인: Word Cloud Library를 수정하여 타 국가 언어에서도 적용될 수 있게 하였습니다. 또한 Korea-nlp 프로젝트의 라이브러리를 추가하여 한국어 기반의 텍스트의 경우 더욱 자연스럽게 출력되도록 하였습니다. 그 외 템플릿을 수정하였습니다. <br>
우주호: Word Cloud 웹 크롤링(벅스뮤직)을 이용하여 가사를 텍스트(UTF-8)로 받아와 기존 텍스트 파일이 없더라도 쉽게 사용할 수 있도록 구현하였습니다.<br>
정승찬: 직접적으로 개발에 참여 하진 않았지만, 회의에 참여하여 다양한 아이디어를 냈습니다. 오픈소스 제작부분을 맡아 BVH Parsing Library 제작을 담당했습니다. <br>
